{% extends "base.html" %}
{% block title %}Chat - MedFlowAI{% endblock %}

{% block content %}
<div x-data="{
    messages: [{role: 'assistant', content: 'Hello! This is a demo. AI is not connected.', timestamp: Date.now()}],
    input: '',
    
    async sendMessage() {
        if (!this.input.trim()) return;
        
        this.messages.push({role: 'user', content: this.input, timestamp: Date.now()});
        const q = this.input;
        this.input = '';
        
        // Mock response
        setTimeout(() => {
            this.messages.push({
                role: 'assistant',
                content: 'This is a demo response. For the full version, AI will analyze your health data.',
                timestamp: Date.now()
            });
        }, 1000);
    }
}">
    <h1 class="text-2xl font-bold text-gray-900 mb-4">Health Chat</h1>
    
    <div class="space-y-4 mb-20" style="height: calc(100vh - 200px); overflow-y: auto;">
        <template x-for="msg in messages" :key="msg.timestamp">
            <div :class="msg.role === 'user' ? 'flex justify-end' : 'flex justify-start'">
                <div :class="msg.role === 'user' ? 'bg-blue-500 text-white' : 'bg-white border'"
                     class="max-w-[80%] rounded-2xl px-4 py-3">
                    <p class="text-sm" x-text="msg.content"></p>
                </div>
            </div>
        </template>
    </div>
    
    <div class="fixed bottom-16 left-0 right-0 bg-white p-3 max-w-md mx-auto">
        <form @submit.prevent="sendMessage()" class="flex space-x-2">
            <input x-model="input" placeholder="Type..." class="flex-1 border rounded-xl px-3 py-2">
            <button type="submit" class="bg-blue-500 text-white p-3 rounded-xl">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                </svg>
            </button>
        </form>
    </div>
</div>
{% endblock %}